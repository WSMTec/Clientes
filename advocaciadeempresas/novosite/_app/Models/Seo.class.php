<?php/** * Seo [ MODEL ] * Classe de apoio para o modelo LINK. Pode ser utilizada para gerar SSEO para as páginas do sistema! *  * @copyright (c) Jefferson Androcles */class Seo {    private $File;    private $Link;    private $Data;    private $Tags;    /* DADOS POVOADOS */    private $seoTags;    private $seoData;    function __construct($File, $Link) {        $this->File = strip_tags(trim($File));        $this->Link = strip_tags(trim($Link));    }    /**     * <b>Obter MetaTags:</b> Execute este método informando os valores de navegação para que o mesmo obtenha     * todas as metas como title, description, og, itemgroup, etc.     *      * <b>Deve ser usada com um ECHO dentro da tag HEAD!</b>     * @return HTML TAGS =  Retorna todas as tags HEAD     */    public function getTags() {        $this->checkData();        return $this->seoTags;    }    /**     * <b>Obter Dados:</b> Este será automaticamente povoado com valores de uma tabela single para arquivos     * como categoria, artigo, etc. Basta usar um extract para obter as variáveis da tabela!     *      * @return ARRAY = Dados da tabela     */    public function getData() {        $this->checkData();        return $this->seoData;    }    /*     * ***************************************     * **********  PRIVATE METHODS  **********     * ***************************************     */    //Verifica o resultset povoando os atributos    private function checkData() {        if (!$this->seoData):            $this->getSeo();        endif;    }    //Identifica o arquivo e monta o SEO de acordo    private function getSeo() {        $ReadSeo = new Read;        switch ($this->File):            //SEO:: INDEX            case 'index':                $this->Data = [SITENAME, SITEDESC, HOME, INCLUDE_PATH . '/images/site.jpg'];                break;            //SEO:: Escritorio            case 'escritorio':                $this->Data = ["Escritório - " . SITENAME, "O escritório Dr. Antonio Luiz Mazzilli, foi fundado em 2004, e desde então vem crescendo, através de importantes investimentos de infraestrutura e aprimoramento, que resulta em melhor atendimento, serviços de qualidade e maior segurança e conforto aos nossos clientes.", HOME . '/escritorio', INCLUDE_PATH . '/images/site.jpg'];                break;            //SEO:: Equipe            case 'equipe':                $this->Data = ["Equipe - " . SITENAME, "O escritório Dr. Antonio Luiz Mazzilli nasceu da união de profissionais atuantes na área do Direito Empresarial, com ênfase no Direito Trabalhista, Cível, Tributário, Administrativo, Contratual, Previdenciário e Penal. A excelência no atendimento aos clientes é a principal meta deste escritório, investindo sempre no aprimoramento de seus profissionais e numa íntima ligação com os melhores centros de ensino jurídico do país.", HOME . '/equipe', INCLUDE_PATH . '/images/site.jpg'];                break;            //SEO:: Areas            case 'areas':                $this->Data = ["Áreas de Atuação - " . SITENAME, "A capacidade de articulação e aperfeiçoamento técnico permite que nossa equipe atue nos mais diversos ramos do direito e seja presença constante na solução dos conflitos trazidos por nossos clientes, essa atuação se dá na esfera administrativa ou judicial, através de consultoria, assessoria ou de forma contenciosa.", HOME . '/areas', INCLUDE_PATH . '/images/site.jpg'];                break;            //SEO:: Newsletter            case 'newsletter':                $this->Data = ["Newsletter - " . SITENAME, "Se cadastre e receba exclusivamente em seu WhatsApp ou e-mail, as notícias jurídicas mais importantes que de alguma maneira afetam a vida de milhares de brasileiros, é rápido e fácil, clique abaixo:", HOME . '/newsletter', INCLUDE_PATH . '/images/site.jpg'];                break;            //SEO:: Area            case 'area':                $ReadSeo->ExeRead("tb_areas", "WHERE area_name = :link", "link={$this->Link}");                if (!$ReadSeo->getResult()):                    $this->seoData = null;                    $this->seoTags = null;                else:                    extract($ReadSeo->getResult()[0]);                    $this->seoData = $ReadSeo->getResult()[0];                    $this->Data = [$area_title . ' - ' . SITENAME, $area_content, HOME . "/categoria/{$area_name}", INCLUDE_PATH . '/images/site.jpg'];                    //category:: conta views da categoria                    $ArrUpdate = ['area_views' => $area_views + 1];                    $Update = new Update();                    $Update->ExeUpdate("tb_areas", $ArrUpdate, "WHERE area_id = :catid", "catid={$area_id}");                endif;                break;            //SEO:: Blog            case 'blog':                $this->Data = ["Blog - " . SITENAME, "Em nosso blog você se atualiza com novidades do mundo jurídico, notícias que de alguma forma afetam o dia-a-dia do trabalhador, da sua empresa ou do seu negócio, também confere dicas importantes de como manter o foco, como mudar os padrões para alcançar o tão sonhado sucesso. Não perca tempo, acesse já e confira:", HOME . '/blog', INCLUDE_PATH . '/images/site.jpg'];                break;            //SEO:: CATEGORIA            case 'categoria':                $ReadSeo->ExeRead("tb_categories", "WHERE category_name = :link", "link={$this->Link}");                if (!$ReadSeo->getResult()):                    $this->seoData = null;                    $this->seoTags = null;                else:                    extract($ReadSeo->getResult()[0]);                    $this->seoData = $ReadSeo->getResult()[0];                    $this->Data = [$category_title . ' - ' . SITENAME, $category_content, HOME . "/categoria/{$category_name}", INCLUDE_PATH . '/images/site.jpg'];                    //category:: conta views da categoria                    $ArrUpdate = ['category_views' => $category_views + 1];                    $Update = new Update();                    $Update->ExeUpdate("tb_categories", $ArrUpdate, "WHERE category_id = :catid", "catid={$category_id}");                endif;                break;            //SEO:: Artigo            case 'artigo':                $Admin = (isset($_SESSION['userlogin']['user_level']) && $_SESSION['userlogin']['user_level'] == 3 ? true : false);                $Check = ($Admin ? '' : 'post_status = 1 AND');                $ReadSeo->ExeRead("tb_posts", "WHERE {$Check} post_name = :link", "link={$this->Link}");                if (!$ReadSeo->getResult()):                    $this->seoData = null;                    $this->seoTags = null;                else:                    $extract = extract($ReadSeo->getResult()[0]);                    $this->seoData = $ReadSeo->getResult()[0];                    $this->Data = [$post_title . ' - ' . SITENAME, $post_content, HOME . "/artigo/{$post_name}", HOME . "/uploads/{$post_cover}"];                    //post:: conta views do post                    $ArrUpdate = ['post_views' => $post_views + 1];                    $Update = new Update();                    $Update->ExeUpdate("tb_posts", $ArrUpdate, "WHERE post_id = :postid", "postid={$post_id}");                endif;                break;            //SEO:: Artigo            case 'ebook':                $Admin = (isset($_SESSION['userlogin']['user_level']) && $_SESSION['userlogin']['user_level'] == 3 ? true : false);                $Check = ($Admin ? '' : 'ebook_status = 1 AND');                $ReadSeo->ExeRead("tb_ebook", "WHERE {$Check} ebook_name = :link", "link={$this->Link}");                if (!$ReadSeo->getResult()):                    $this->seoData = null;                    $this->seoTags = null;                else:                    $extract = extract($ReadSeo->getResult()[0]);                    $this->seoData = $ReadSeo->getResult()[0];                    $this->Data = [$ebook_title . ' - ' . SITENAME, $ebook_content, HOME . "/artigo/{$ebook_name}", HOME . "/uploads/{$ebook_cover}"];                    //post:: conta views do post                    $ArrUpdate = ['ebook_views' => $ebook_views + 1];                    $Update = new Update();                    $Update->ExeUpdate("tb_ebook", $ArrUpdate, "WHERE ebook_id = :postid", "postid={$ebook_id}");                endif;                break;            //SEO:: Contatos            case 'contatos':                $this->Data = ["Contatos - " . SITENAME, "Afim de facilitar o acesso dos nossos clientes, disponibilizamos abaixo os nossos contatos, seja através de telefone, WhatsApp, e-mail, endereço e também pelas nossas redes sociais. Entre em contato com nosso escritório e deixe que tomamos conta do seu conflito.", HOME . '/contatos', INCLUDE_PATH . '/images/site.jpg'];                break;            //SEO:: Confirm            case 'confirm':                $this->Data = ["Confimação de envio - " . SITENAME, "", HOME . '/confirm', INCLUDE_PATH . '/images/site.jpg'];                break;            //SEO:: Audio            case 'audio.php':                $exUrl = explode("=", $_SERVER['REQUEST_URI']);                $url = HOME . "/audio/{$exUrl[1]}";                header("Location: {$url}");                break;            //SEO:: Audio            case 'audio':                $ReadSeo->ExeRead("tb_uploads", "WHERE audio_title = :link", "link={$this->Link}");                if (!$ReadSeo->getResult()):                    $this->seoData = null;                    $this->seoTags = null;                else:                    extract($ReadSeo->getResult()[0]);                    $this->seoData = $ReadSeo->getResult()[0];                    $this->Data = [$audio_title . ' - ' . SITENAME, $audio_title, HOME . "/audio/{$audio_title}", INCLUDE_PATH . '/images/site.jpg', 'none'];                endif;                break;            //SEO:: 404            default :                $this->Data = [SITENAME . ' - 404 - nada encontrado!', SITEDESC, HOME . '/404', INCLUDE_PATH . '/images/site.jpg'];        endswitch;        if ($this->Data):            $this->setTags();        endif;    }    //Monta e limpa as tags para alimentar as tags    private function setTags() {        $this->Tags['Title'] = $this->Data[0];        $this->Tags['Content'] = Check::Words(html_entity_decode($this->Data[1]), 25);        $this->Tags['Link'] = $this->Data[2];        $this->Tags['Image'] = $this->Data[3];        $robos = (isset($this->Data[4]) ? $this->Data[4] : "index, follow");        $this->Tags = array_map('strip_tags', $this->Tags);        $this->Tags = array_map('trim', $this->Tags);        $this->Data = null;        //NORMAL PAGE        $this->seoTags = '<title>' . $this->Tags['Title'] . '</title> ' . "\n";        $this->seoTags .= '<meta name="description" content="' . $this->Tags['Content'] . '"/>' . "\n";        $this->seoTags .= '<meta name="robots" content="' . $robos . '" />' . "\n";        $this->seoTags .= '<link rel="base" href="' . HOME . '"/>' . "\n";        $this->seoTags .= '<link rel="canonical" href="' . $this->Tags['Link'] . '">' . "\n";        $this->seoTags .= "\n";        //FACEBOOK        $this->seoTags .= '<meta property="og:site_name" content="' . SITENAME . '" />' . "\n";        $this->seoTags .= '<meta property="og:locale" content="pt_BR" />' . "\n";        $this->seoTags .= '<meta property="og:title" content="' . $this->Tags['Title'] . '" />' . "\n";        $this->seoTags .= '<meta property="og:description" content="' . $this->Tags['Content'] . '" />' . "\n";        $this->seoTags .= '<meta property="og:image" content="' . $this->Tags['Image'] . '" />' . "\n";        $this->seoTags .= '<meta property="og:url" content="' . $this->Tags['Link'] . '" />' . "\n";        $this->seoTags .= '<meta property="og:type" content="article" />' . "\n";        $this->seoTags .= "\n";        //ITEM GROUP (TWITTER)        $this->seoTags .= '<meta itemprop="name" content="' . $this->Tags['Title'] . '">' . "\n";        $this->seoTags .= '<meta itemprop="description" content="' . $this->Tags['Content'] . '">' . "\n";        $this->seoTags .= '<meta itemprop="url" content="' . $this->Tags['Link'] . '">' . "\n";        $this->seoTags .= '<meta itemprop="image" content="' . $this->Tags['Image'] . '">' . "\n";        $this->seoTags .= '<link rel="shortcut icon" type="image/png" href="' . INCLUDE_PATH . '/images/favicon.png' . '">' . "\n";        $this->Tags = null;    }}