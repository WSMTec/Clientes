$(function () {    var ajaxResponseBaseTime = 3;    var ajaxResponseRequestError = "<div class='message error icon-warning'>Desculpe mas não foi possível processar sua requisição...</div>";    var effecttime = 200;    var page = $("body").attr("id");    var body = $("body").attr("id");    if (page === 'billstoreceive-index' ||            page === 'companies-index' ||            page === 'department-index' ||            page === 'tickets-index' ||            page === 'reports-index') {        DataTableAll();    } else {        DataTable();    }    AddRows();         $(".select_option").change(function () {    var id = $(this).val();    if (id == 'audiosite') {      $(".div_link").fadeIn();    }  else {      $(".div_link").fadeOut(1);    }  });    $('.carregando').hide();    $('#form-department').submit(function (e) {        e.preventDefault();        var data = $(this).serialize();        var action = $(this).attr('action');        Ajax(action, data);    });    $('#form-department-update').submit(function (e) {        e.preventDefault();        var data = $(this).serialize();        var action = $(this).attr('action');        Ajax(action, data);    });    $('#form-sitemap').submit(function (e) {        e.preventDefault();        var data = $(this).serialize();        var action = $(this).attr('action');        Ajax(action, data);    });    $('#form-sitemap-update').submit(function (e) {        e.preventDefault();        var data = $(this).serialize();        var action = $(this).attr('action');        Ajax(action, data);    });    $('#form-config').submit(function (e) {        e.preventDefault();        var form = $(this);        var action = $(this).attr('action');        jQueryForm(action, form);    });    $('#form-user').submit(function (e) {        e.preventDefault();        var data = $(this).serialize();        var action = $(this).attr('action');        Ajax(action, data);    });    $('#form-user-update').submit(function (e) {        e.preventDefault();        var data = $(this).serialize();        var action = $(this).attr('action');        Ajax(action, data);    });    $('#form-user-profile').submit(function (e) {        e.preventDefault();        var data = $(this).serialize();        var action = $(this).attr('action');        Ajax(action, data);    });    $('#form-servicos').submit(function (e) {        e.preventDefault();        var data = $(this).serialize();        var action = $(this).attr('action');        Ajax(action, data);    });    $('#form-servicos-update').submit(function (e) {        e.preventDefault();        var data = $(this).serialize();        var action = $(this).attr('action');        Ajax(action, data);    });    $('#form-reports').submit(function (e) {        e.preventDefault();        var data = $(this).serialize();        var action = $(this).attr('action');        Ajax(action, data);    });    $('#form-reports-update').submit(function (e) {        e.preventDefault();        var data = $(this).serialize();        var action = $(this).attr('action');        Ajax(action, data);    });    $('#form-ctrec').submit(function (e) {        e.preventDefault();        var form = $(this);        var action = $(this).attr('action');        jQueryForm(action, form);    });    $('#form-upload').submit(function (e) {        e.preventDefault();        var form = $(this);        var action = $(this).attr('action');        jQueryForm(action, form);    });    $('#form-team').submit(function (e) {        e.preventDefault();        var form = $(this);        var action = $(this).attr('action');        jQueryForm(action, form);    });    $('#form-process').submit(function (e) {        e.preventDefault();        var form = $(this);        var action = $(this).attr('action');        jQueryForm(action, form);    });    $('#form-client').submit(function (e) {        e.preventDefault();        var form = $(this);        var action = $(this).attr('action');        jQueryForm(action, form);    });    $('#form-client-update').submit(function (e) {        e.preventDefault();        var form = $(this);        var action = $(this).attr('action');        jQueryForm(action, form);    });    $('#form-process-update').submit(function (e) {        e.preventDefault();        var form = $(this);        var action = $(this).attr('action');        jQueryForm(action, form);    });    $('#form-team-update').submit(function (e) {        e.preventDefault();        var form = $(this);        var action = $(this).attr('action');        jQueryForm(action, form);    });    $('#form-slider').submit(function (e) {        e.preventDefault();        var form = $(this);        var action = $(this).attr('action');        jQueryForm(action, form);    });    $('#form-slider-update').submit(function (e) {        e.preventDefault();        var form = $(this);        var action = $(this).attr('action');        jQueryForm(action, form);    });    $('#form-area').submit(function (e) {        e.preventDefault();        var form = $(this);        var action = $(this).attr('action');        jQueryForm(action, form);    });    $('#form-area-update').submit(function (e) {        e.preventDefault();        var form = $(this);        var action = $(this).attr('action');        jQueryForm(action, form);    });    $('#form-ebook').submit(function (e) {        e.preventDefault();        var form = $(this);        var action = $(this).attr('action');        jQueryForm(action, form);    });    $('#form-ebook-update').submit(function (e) {        e.preventDefault();        var form = $(this);        var action = $(this).attr('action');        jQueryForm(action, form);    });    $('#form-upload-update').submit(function (e) {        e.preventDefault();        var form = $(this);        var action = $(this).attr('action');        jQueryForm(action, form);    });    $('#form-categories-update').submit(function (e) {        e.preventDefault();        var data = new FormData(this);        var action = $(this).attr('action');        AjaxMidia(action, data);    });    $('#form-categories').submit(function (e) {        e.preventDefault();        var data = $(this).serialize();        var action = $(this).attr('action');        Ajax(action, data);    });    $('#form-comment-update').submit(function (e) {        e.preventDefault();        var data = new FormData(this);        var action = $(this).attr('action');        AjaxMidia(action, data);    });    $('#form-comment').submit(function (e) {        e.preventDefault();        var data = $(this).serialize();        var action = $(this).attr('action');        Ajax(action, data);    });    $('#form-posts').submit(function (e) {//        alert(1);        e.preventDefault();        var form = $(this);        var action = $(this).attr('action');        jQueryForm(action, form);    });    $('#form-posts-update').submit(function (e) {        e.preventDefault();        var form = $(this);        var action = $(this).attr('action');        jQueryForm(action, form);    });    $('#form-services').submit(function (e) {        e.preventDefault();        var form = $(this);        var action = $(this).attr('action');        jQueryForm(action, form);    });    $('#form-services-update').submit(function (e) {        e.preventDefault();        var form = $(this);        var action = $(this).attr('action');        jQueryForm(action, form);    });    $('#form-product').submit(function (e) {        e.preventDefault();        var form = $(this);        var action = $(this).attr('action');        jQueryForm(action, form);    });    $('#form-product-update').submit(function (e) {        e.preventDefault();        var form = $(this);        var action = $(this).attr('action');        jQueryForm(action, form);    });    $('#form-newsletter').submit(function (e) {        e.preventDefault();        var favorite = [];        $.each($("input[name='select_user']:checked"), function () {            favorite.push($(this).val());        });        var dados = favorite.join(", ");        var data = $(this).serialize() + "&news=" + dados;//        alert(data);        var action = $(this).attr('action');        Ajax(action, data);    });    $('#form-tickets').submit(function (e) {        e.preventDefault();        var form = $(this);        var action = $(this).attr('action');        jQueryForm(action, form);    });    $('#form-tickets-msg').submit(function (e) {        e.preventDefault();        var form = $(this);        var action = $(this).attr('action');        jQueryForm(action, form);    });    $('body').on('click', 'button[name="btn-href[]"]', function (e) {        e.preventDefault();        var action = $(this).data("href");        window.location.href = action;    });    $('body').on('click', 'button[name="btn-print[]"]', function (e) {        e.preventDefault();        var action = $(this).data("href");        window.open(action, '_blank');    });    $('#btn-notificacao').click(function (e) {        e.preventDefault();        notificacao();    });    $('#form').keypress(function (e) {        if (e.which === 13) {            e.preventDefault();        }    });    function notificacao() {        var action = "notification";        var codigo = 0;        $.post('_models/AdminManager.php?action=search-' + action, {codigo: codigo}, function (data) {            $(".wd-not").html(data);        });    }    function emptyForm(data) {        var vazios = $(data).filter(function () {            return !this.value;        }).get();        if (vazios.length) {            $(vazios).addClass('vazio');            return false;        }    }    function Ajax(action, data, codigo = null) {        var intp = $('.inpt-null');        var btn = $('#btn-form').html();        intp.removeClass('vazio');        if (emptyForm(intp)) {            return false;        }        if ($('.trigger_notify').length) {            $('.trigger_notify').remove();        }        $('#btn-form').attr("disabled", "disabled").addClass('form-btn-create').html("<img src='images/carregando.gif' width='15'/> Carregando");        $.ajax({            url: '_models/AdminManager.php?action=' + action,            method: 'POST',            data: data,            dataType: 'json',            success: function (data) {                if (data.reset === true) {                    $('form').trigger("reset");                }                if (data.rows === true) {                    $(".remove-row").parent('div').remove();                }                if (data.training === true) {                    $('input[name*=NomeTes]').attr("disabled", "disabled");                }                if (data.erro === true) {                    trigger(data.notify);                    $('#btn-form').removeAttr("disabled").removeClass('form-btn-create').html(btn);                } else {                    trigger(data.notify);                    $('#btn-form').removeAttr("disabled").removeClass('form-btn-create').html(btn);                }//                $('#btn-form').removeAttr("disabled").removeClass('form-btn-create').html(btn);                if (data.reloadtime === true) {                    setTimeout(function () {                        window.location.reload();                    }, 3000);                }            }        });    }    function AjaxMidia(action, data, codigo = null) {        var intp = $('.inpt-null');        var btn = $('#btn-form').html();        intp.removeClass('vazio');        if (emptyForm(intp)) {            return false;        }        if ($('.trigger_notify').length) {            $('.trigger_notify').remove();        }        $('#btn-form').attr("disabled", "disabled").addClass('form-btn-create').html("<img src='images/carregando.gif' width='15'/> Carregando");        $.ajax({            url: '_models/AdminManager.php?action=' + action,            data: data,            cache: false,            contentType: false,            processData: false,            type: 'POST',            dataType: 'json',            success: function (data) {                if (data.reset === true) {                    $('form').trigger("reset");                }                if (data.rows === true) {                    $(".remove-row").parent('div').remove();                }                if (data.resp.length) {                    $('.resp').html(data.resp);                    $('.comment').hide();                }                if (data.erro === true) {                    trigger(data.notify);                    $('#btn-form').removeAttr("disabled").removeClass('form-btn-create').html(btn);                } else {                    trigger(data.notify);                    $('#btn-form').removeAttr("disabled").removeClass('form-btn-create').html(btn);                }                if (data.reloadtime === true) {                    setTimeout(function () {                        window.location.reload();                    }, 3000);                }            }        });    }    function jQueryForm(action, form, codigo = null, dados = null) {        var intp = $('.inpt-null');        var btn = $('#btn-form').html();        intp.removeClass('vazio');        if (emptyForm(intp)) {            return false;        }        if ($('.trigger_notify').length) {            $('.trigger_notify').remove();        }        var per = $('.processing');        form.ajaxSubmit({            url: '_models/AdminManager.php?action=' + action,            type: 'POST',//            data: dados.toString(),            dataType: 'json',            beforeSubmit: function () {                $('#btn-form').attr("disabled", "disabled").addClass('form-btn-create').html("<img src='images/carregando.gif' width='15'/> Carregando");            },            uploadProgress: function (event, position, total, percent) {                per.fadeIn("fast");                per.width(percent + "%");                if (form.find(".load").length) {                    form.find(".load b").text(percent + "%");                } else {                    $('#btn-form').html("<span class='load'><b>" + percent + "%</b></span> Carregando");                }            },            success: function (data) {                if (data.reset === true) {                    form.trigger("reset");                }                if (data.rows === true) {                    $(".remove-row").parent('div').remove();                }                if (data.erro === true) {                    trigger(data.notify);                } else {                    trigger(data.notify);                }                if (data.reloadtime === true) {                    setTimeout(function () {                        window.location.reload();                    }, 3000);                }            },            complete: function () {                window.setTimeout(function () {                    per.width('0%');                    $('.load').remove();                    $('#btn-form').removeAttr("disabled").removeClass('form-btn-create').html(btn);                }, 10);            }        });    }    /*     * APP MODAL     */    $("[data-modalopen]").click(function (e) {        e.preventDefault();        var clicked = $(this);        var modal = clicked.data("modalopen");        $(".app_modal").fadeIn(effecttime).css("display", "flex");        $(modal).fadeIn(effecttime);        if ($('.search_product').length) {            $('.search_product').focus();        }    });    $("[data-modalclose]").click(function (e) {        if (e.target === this) {            $(this).fadeOut(effecttime);            $(this).children().fadeOut(effecttime);            $(".form_reset").trigger("reset");        }    });    /*     * FROM CHECKBOX     */    $("[data-checkbox]").click(function (e) {        var checkbox = $(this);        checkbox.parent().find("label").removeClass("check");        if (checkbox.find("input").is(':checked')) {            checkbox.addClass("check");        } else {            checkbox.removeClass("check");        }    });    /*     * FADE     */    $("[data-fadeout]").click(function (e) {        var clicked = $(this);        var fadeout = clicked.data("fadeout");        $(fadeout).fadeOut(effecttime, function (e) {            if (clicked.data("fadein")) {                $(clicked.data("fadein")).fadeIn(effecttime);            }        });    });    $("[data-fadein]").click(function (e) {        var clicked = $(this);        var fadein = clicked.data("fadein");        $(fadein).fadeIn(effecttime, function (e) {            if (clicked.data("fadeout")) {                $(clicked.data("fadeout")).fadeOut(effecttime);            }        });    });    // MODALS    $("[data-modalpro]").focus(function (e) {        $(this).blur();        $(".app_modal_select_icms").css({"display": "none"});        $(".app_modal_select_cfop").css({"display": "none"});        $(".app_modal_select_ipi").css({"display": "none"});        $(".app_modal_select_pis").css({"display": "none"});        var load = $(".ajax_load");        var clicked = $(this);        var modal = clicked.data("modalpro");        var option = clicked.data("modalopt");        load.fadeIn(200).css("display", "flex");        $(".input_focus").focus();        if (option === 'fixed') {            $(".app_modal").fadeIn(effecttime).css("display", "flex");            $(modal).fadeIn(effecttime);            load.fadeOut(200);        } else {            $.post("_models/Search.php", {"title": option}, function (response) {                $.each(response, function (i, data) {                    $(modal + " .tbody_select").prepend(data);                });                $(".app_modal").fadeIn(effecttime).css("display", "flex");                $(modal).fadeIn(effecttime);                load.fadeOut(200);            }, 'json');        }    });    $("body").on("click", "[data-modalopenv]", function (e) {        e.preventDefault();        var code = $(this).data('code');        var load = $(".ajax_load");        load.fadeIn(200).css("display", "flex");        var target = $(".app_modal_views").closest("[data-class]");        var string = target.data('class');        var dados = (string === 'ctrec' ? 'billstoreceive-views' : 'billstopay-views');        $.post("_models/Search.php", {"action": dados, "code": code}, function (response) {            $(".app_modal").fadeIn(effecttime).css("display", "flex");            $(".app_modal_views").fadeIn(effecttime);            $(".box_views").html(response['html']);            load.fadeOut(200);        }, 'json');    });    $("body").on("click", ".unificarbtn", function (e) {        var favorite = [];        $.each($("input[name='selectrow']:checked"), function () {            favorite.push($(this).val());        });        $(".app_modal").fadeIn(effecttime).css("display", "flex");        $(".app_modal_unify").fadeIn(effecttime);        $(".form_unify .input_data").val(favorite.join(", "));    });    $("body").on("click", ".multbaixarbtn", function (e) {        var favorite = [];        $.each($("input[name='selectrow']:checked"), function () {            favorite.push($(this).val());        });        $(".app_modal").fadeIn(effecttime).css("display", "flex");        $(".app_modal_multbaixar").fadeIn(effecttime);        $(".form_multbaixar .input_data").val(favorite.join(", "));    });    $("body").on("click", "[data-replic]", function (e) {        var data = $(this).data("replic");        $(".app_modal").fadeIn(effecttime).css("display", "flex");        $(".app_modal_replic").fadeIn(effecttime);        $(".form_replic .input_data").val(data);    });    function converteMoedaFloat(valor) {        if (valor === "") {            valor = 0;        } else {            valor = valor.replace(".", "");            valor = valor.replace(",", ".");            valor = parseFloat(valor);        }        return valor;    }    function limparReal(str) {        var real = str.replace('R$', '');        return converteMoedaFloat(real);    }    function mascaraValor(valor) {        valor = valor.toString().replace(/\D/g, "");        valor = valor.toString().replace(/(\d)(\d{8})$/, "$1.$2");        valor = valor.toString().replace(/(\d)(\d{5})$/, "$1.$2");        valor = valor.toString().replace(/(\d)(\d{2})$/, "$1,$2");        return valor;    }    function convertToCurrency(value) {        return value.toLocaleString("pt-BR", {            style: "currency",            currency: "BRL",            minimumFractionDigits: 2        })    }    function convertToCurrencySem(value) {        return value.toLocaleString("pt-BR", {//            style: "currency",//            currency: "BRL",            minimumFractionDigits: 2        });    }    $("[data-gp]").click(function (e) {        var Codigos = new Array();        var vlr = $(".VLPAG").val();        $("input[name='Prazo[]']").each(function () {            Codigos.push($(this).val());        });        var load = $(".ajax_load");        load.fadeIn(200).css("display", "flex");        $.post("_models/Search.php", {action: "requests-gp", data: Codigos, vlr: vlr}, function (response) {            if (response.gp) {                $('.row_items_two').empty();            }            $.each(response.gerar, function (key, value) {                $('.row_items_two').append('' +                        '<div data-gpclass=".' + value['prc'] + '" id="new-row-two" class="row-f new-row-two ' + value['prc'] + '">\                                <div class="row-m">\                                <div class="row-m">\                                    <label>\                                        N° Parcela\                                    </label>\                                    <input class="empty_field " type="text" disabled value="' + value['prc'] + '"/>\                                    <input class="empty_field " name="DVENC[]" type="hidden" value="' + value['data'] + '"/>\                                    <input class="empty_field " name="DEMIS[]" type="hidden" value="' + value['demi'] + '"/>\                                    <input class="empty_field " name="VLPAG[]" type="hidden" value="' + value['vl'] + '"/>\                                    <input class="empty_field " name="Dias[]" type="hidden" value="' + value['dias'] + '"/>\                                    <input class="empty_field " name="NPARC[]" type="hidden" value="' + value['prc'] + '"/>\                                </div>\                                <div class="row-m">\                                    <label>\                                        Vencimento\                                    </label>\                                    <input class="empty_field " type="date" disabled value="' + value['data'] + '"/>\                                </div>\                                </div>\                                <div class="row-m">\                                <div class="row-m">\                                    <label>\                                        Valor\                                    </label>\                                    <input class="empty_field " type="text" disabled value="' + mascaraValor(parseFloat(value['vl']).toFixed(2)) + '"/>\                                </div>\                                <div class="row-m">\                                    <label>\                                        Prazo\                                    </label>\                                    <input class="empty_field " type="text" disabled value="' + value['dias'] + '"/>\                                </div>\                                </div>\                            <div class="div_button">\                            <!-- <a data-mremovepg="' + value['prc'] + '" class="btn-danger btn-default remove-row"><span class="lnr lnr-cross"></span> Remover</a>\--!>\                            ' + (value['buttonbl'] ? '<a data-gb="' + value['prc'] + '" class="btn-info btn-default gerar_boleto"><span class="lnr lnr-text-align-left"></span> Gerar boleto</a>' : '') + '\                            </div>\                            </div>\                        ');            });            if (response.message) {                ajaxMessage(response.message, ajaxResponseBaseTime);            }            load.fadeOut();        }, 'json');    });    $('.button_vlpg').click(function (e) {        e.preventDefault();        var vl = $('.vl_titutlo').val();        $('.vl_titutlopg').val(vl);    });    $("body").on("click", "[data-mremovepg]", function (e) {        e.preventDefault();        var code = $(this).data('mremovepg');        var load = $(".ajax_load");        load.fadeIn(200).css("display", "flex");        $.post("_models/Search.php", {"action": "requests-gp-remove", "code": code}, 'json');        var target = $(this).closest('[data-gpclass]');        var box = target.data('gpclass');        $(box).remove();        load.fadeOut(200);    });    $("body").on("click", "[data-gb]", function (e) {        e.preventDefault();        var nped = $('.npp').val();        var parcela = $(this).data('gb');        var banco = $('.codbanc').val();        var tipopg = $('.tipopg').val();        var load = $(".ajax_load");        load.fadeIn(200).css("display", "flex");        $.post("_models/AdminManager.php", {"action": "requests-gb", "data": parcela, banco, tipopg, nped}, function (response) {            var p = false;            if (response.printbol) {                var lar_janela = window.innerWidth;                var alt_janela = window.innerHeight;                console.log(alt_janela);                window.open(response.printbol, "_blank", "toolbar=false, scrollbars=false,resizable=false, top=" + (alt_janela - 200) + ", left=" + (lar_janela - 300) + ", width=500, height=800");                p = true;            }            if (p && response.redirect) {                window.location.href = response.redirect;            }            if (response.message) {                // load.fadeOut(200);                ajaxMessage(response.message, ajaxResponseBaseTime);            }        }, 'json');        load.fadeOut(200);    });    $("body").on("click", "[data-gbger]", function (e) {        e.preventDefault();        var code = $(this).data('gbger');        var load = $(".ajax_load");        load.fadeIn(200).css("display", "flex");        var lar_janela = window.innerWidth;        var alt_janela = window.innerHeight;        console.log(alt_janela);        window.open("/adm/boleto.php?code=" + code + "", "_blank", "toolbar = false, scrollbars = false, resizable = false, top = " + (alt_janela - 200) + ", left = " + (lar_janela - 300) + ", width = 500, height = 800");        load.fadeOut(200);    });    $("body").on("click", "[data-select]", function (e) {        e.preventDefault();        var clicked = $(this);        var code = clicked.data("value");        var input = clicked.data("select");        $(input).val(code);        $("[data-modalclose]").fadeOut(effecttime);        $("[data-modalclose]").children().fadeOut(effecttime);    });    $('#seletor').on('change', function () {        var select = $(this).val();        $('.div-sel').each(function () {            if ($(this).attr('id') == select) {                $(this).toggle();            } else {                $(this).hide();            }        });    });    $('#category').change(function () {        var value = $(this).val();        var vid = value.split("-");        if (vid[0] && vid[0] === 'videos') {//            $('.row-video').hide();            $('.row-video').show();        } else {            $('.row-video').hide();//            $('.companies_hide').show();        }    });    // AJAX RESPONSE    function ajaxMessage(message, time) {        var ajaxMessage = $(message);        ajaxMessage.append("<div class='message_time'></div>");        ajaxMessage.find(".message_time").animate({"width": "100%"}, time * 1000, function () {            $(this).parents(".message").fadeOut(200);        });        $(".ajax_response").append(ajaxMessage);        ajaxMessage.effect("bounce");    }    // AJAX RESPONSE MONITOR    $(".ajax_response .message").each(function (e, m) {        ajaxMessage(m, ajaxResponseBaseTime += 1);    });    // AJAX MESSAGE CLOSE ON CLICK    $(".ajax_response").on("click", ".message", function (e) {        $(this).effect("bounce").fadeOut(1);    });    // MAK    $(".mask_moneyj").maskMoney({prefix: 'R$ ', allowNegative: true, thousands: '.', decimal: ',', affixesStay: false});    $('.mask_date').mask('00/00/0000');    $('.mask_time').mask('00:00:00');    $('.mask_date_time').mask('00/00/0000 00:00:00');    $('.mask_cep').mask('00000-000');    $('.mask_phone').mask('0000-0000');    $('.mask_phone_commercial_with_ddd').mask('(00) 0000-0000', {placeholder: "(00) 0000-0000"});    $('.mask_phone_with_ddd').mask('(00) 00000-0000', {placeholder: "(00) 00000-0000"});    $('.mask_phone_us').mask('(000) 000-0000');    $('.mask_mixed').mask('AAA 000-S0S');    $('.mask_state_registration').mask('000.000.000.000', {reverse: true});    $('.mask_cpf').mask('000.000.000-00', {reverse: true});    $('.mask_cnpj').mask('00.000.000/0000-00', {reverse: true});    $('.mask_money').mask('000.000.000.000.000,00', {reverse: true});    $('.mask_money2').mask("#.##0,00", {reverse: true, placeholder: "0,00"});    $('.mask_weight').mask("#.##0,000", {reverse: true, placeholder: "0,000"});    $('.mask_ip_address').mask('0ZZ.0ZZ.0ZZ.0ZZ', {        translation: {            'Z': {                pattern: /[0-9]/, optional: true            }        }    });    $('.mask_ip_address').mask('099.099.099.099');    $('.mask_percent').mask('##0,00%', {reverse: true});    $('.mask_clear-if-not-match').mask("00/00/0000", {clearIfNotMatch: true});    $('.mask_placeholder').mask("00/00/0000", {placeholder: "__/__/____"});    $('.mask_fallback').mask("00r00r0000", {        translation: {            'r': {                pattern: /[\/]/,                fallback: '/'            },            placeholder: "__/__/____"        }    });    $('.mask_selectonfocus').mask("00/00/0000", {selectOnFocus: true});    $(".mask_datetime").mask('00/00/0000 00:00');    $(".mask_month").mask('00/0000', {reverse: true});    $(".mask_doc").mask('000.000.000-00', {reverse: true});    $(".mask_card").mask('0000  0000  0000  0000', {reverse: true});    ModalConfirm();    AddRowsTerm();    function AddRowsTerm() {        var campos_max = 10;        var x = 1;        $('#add_rows_term').click(function (e) {            e.preventDefault();            if (x < campos_max) {                $('#rows_prazo').append('<div id="new_rows_term" class="row-m new_rows_term">\                    <div class="row-m row_term_sub">\                        <label>\                            Prazo\                        </label>\                        <input required class="empty_field" name="Prazo[]" min="1" type="number"/>\                        <a id="remove_rows_term" class="btn-danger btn-default remove_rows_term"><span class="lnr lnr-cross"></span></a>\                    </div>\                </div>\            ');                x++;            }        });        $('body').on("click", ".remove_rows_term", function (e) {            e.preventDefault();            $(this).parent('div').parent('div').remove();            x--;        });    }    $(document).click(function (e) {        var target = e.target;        $('.dropdown-menu-r').each(function () {            var $this = $(this);            var dropdown = $this.prev('.dropdown');            if (dropdown[0] === target)                $(this).toggle();            else                $(this).hide();        });    });    $("#btn-menu").click(function () {        if ($(".nav-left").css("left") === '-273px') {            $(".nav-left").css({"left": "0px"});            $(".nav-top").removeClass("nav-full");            $(".content").removeClass("nav-full");        } else {            $(".nav-left").css({"left": "-273px"});            $(".nav-top").addClass("nav-full");            $(".content").addClass("nav-full");        }    });    $("#btn-designar").click(function () {        $(this).css({"display": "none"});        $(".form-tickets-designate").css({"display": "flex"});    });    function DataTable() {        var Param = $("body").attr("id");        var Value = $('table.table-bordered').first().attr("id");        $('table.table-bordered').DataTable({            language: {                "url": "__jsc/datatable/datatable.pt-br.json"            },            responsive: true,            processing: true,            serverSide: true,            ajax: {                type: "POST",                data: {                    Param: Param, Value                },                url: "_models/TableManager.php"            },            deferRender: true,            order: [[0, 'asc']],            columnDefs: [                {                    targets: -1,                    orderable: false                }            ]        });    }    function DataTableAll() {        var Param = $("body").attr("id");        var Value = $('table.table-bordered').first().attr("id");        $('table.table-bordered').DataTable({            language: {                "url": "__jsc/datatable/datatable.pt-br.json"            },            responsive: true,            processing: true,            serverSide: true,            ajax: {                type: "POST",                data: {                    Param: Param, Value                },                url: "_models/TableManager.php"            },            deferRender: true,            order: [[0, 'asc']],            rowGroup: {                dataSrc: 0            },            columnDefs: [                {                    "targets": [0],                    "visible": false,                    "searchable": false                },                {                    targets: -1,                    orderable: false                }            ]        });    }    function AddRows() {        var campos_max = 10;        var x = 0;        $('#add-row-user').click(function (e) {            e.preventDefault();            if (x < campos_max) {                $('#new-row').append('<div id="new-row" class="row-f new-row">\                <div class="row-f">\                    <div class="row-f">\                        <label>\                            Treinamento/Usuários\                        </label>\                        <input class="inpt-null" name="NomeTes[]" type="text"/>\                    </div>\                <a class="btn-danger btn-default remove-row"><span class="lnr lnr-cross"></span> Remover</a>\                </div>\            ');                x++;            }        });        $('#new-row').on("click", ".remove-row", function (e) {            e.preventDefault();            $(this).parent('div').remove();            x--;        });    }    var inputsCEP = $('#logradouro, #bairro, #localidade, #uf, #ibge');    var inputsRUA = $('#cep, #bairro, #ibge');    var validacep = /^[0-9]{8}$/;    function limpa_formulario_cep(alerta) {        if (alerta !== undefined) {            alert(alerta);        }        inputsCEP.val('');    }    function get(url) {        $.get(url, function (data) {            if (!("erro" in data)) {                if (Object.prototype.toString.call(data) === '[object Array]') {                    var data = data[0];                }                $.each(data, function (nome, info) {                    $('#' + nome).val(nome === 'cep' ? info.replace(/\D/g, '') : info).attr('info', nome === 'cep' ? info.replace(/\D/g, '') : info);                });            } else {                limpa_formulario_cep("CEP não encontrado.");            }        });    }    $('#logradouro, #localidade, #uf').on('blur', function (e) {        if ($('#logradouro').val() !== '' && $('#logradouro').val() !== $('#logradouro').attr('info') && $('#localidade').val() !== '' && $('#localidade').val() !== $('#localidade').attr('info') && $('#uf').val() !== '' && $('#uf').val() !== $('#uf').attr('info')) {            inputsRUA.val('...');            get('https://viacep.com.br/ws/' + $('#uf').val() + '/' + $('#localidade').val() + '/' + $('#logradouro').val() + '/json/');        }    });    $('#cep').on('blur', function (e) {        var cep = $('#cep').val().replace(/\D/g, '');        if (cep !== "" && validacep.test(cep)) {            inputsCEP.val('...');            get('https://viacep.com.br/ws/' + cep + '/json/');        } else {            limpa_formulario_cep(cep === "" ? undefined : "Formato de CEP inválido.");        }    });    ModalData();//    function modalData() {//        var btn = null;//        var action = null;//        var codigo = null;//        var row = null;//        var grid = null;//        var t = null;////        $('body').on('click', 'button[name="btn-modal[]"]', function (e) {//            e.preventDefault();//            t = $(this);//            btn = $('.btn-accept').html();//            action = $(this).data("function");//            codigo = $(this).val();//            row = $(this).parent().parent().parent();//            grid = $(this).parent();////            $.post('_models/AdminManager.php?action=search-' + action, {codigo: codigo}, function (data) {//                $('.modal-all .header-modal-box h4').text(data.title);//                $('.modal-all .row-f label').html(data.description);//                Modal();//            }, 'json');//        });////        $('.btn-accept').click(function (i) {//            i.preventDefault();//            if ($('.trigger_notify').length) {//                $('.trigger_notify').remove();//            }////            $('.btn-accept').attr("disabled", "disabled").addClass('disabled').html("<img src='images/carregando.gif' width='15'/> Carregando");//            $.ajax({//                url: '_models/AdminManager.php?action=' + action,//                method: 'POST',//                data: {codigo: codigo},//                dataType: 'json',//                success: function (data) {////                    if (data.ticket === true) {//                        t.remove();//                        $('.status-ticket-' + codigo).text('FINALIZADO');//                    }//////                }//            });//        });//    }    // MODAL    function ModalData() {        var button = null;        var action = null;        var code = null;        var row = null;        var grid = null;        var here = null;        $('body').on('click', 'button[name="btn-modal[]"]', function (e) {            e.preventDefault();            here = $(this);            button = $('.acceptbutton').html();            action = $(this).data("function");            code = $(this).val();            row = $(this).parent().parent().parent();            grid = $(this).parent();            $.post('_models/AdminManager.php?action=search-' + action, {codigo: code}, function (data) {                $('.modal-all .header-modal-box h4').text(data.title);                $('.modal-all .row-f label').html(data.description);                Modal();            }, 'json');        });//        $('.acceptbutton').click(function (o) {        $('body').on('click', '.acceptbutton', function (o) {            o.preventDefault();            var load = $(".ajax_load");            $.ajax({                url: '_models/AdminManager.php?action=' + action,                type: "POST",                data: {codigo: code},                dataType: "json",                beforeSend: function () {                    load.fadeIn(200).css("display", "flex");                },                success: function (response) {                    if (response.row === true) {                        row.remove();                    }                    if (response.grid === true) {                        grid.remove();                    }                    if (response.erro === true) {                        trigger(response.notify);                        closeModal();                        load.fadeOut(200);                    } else {                        trigger(response.notify);                        closeModal();                        load.fadeOut(200);                    }                    if (response.href.length) {                        window.setTimeout(function () {                            window.location.href = response.href;                        }, 4000);                    }                    //redirect                    if (response.redirect) {                        window.location.href = response.redirect;                    } else {                        load.fadeOut(200);                    }                    //reload                    if (response.reload) {                        window.location.reload();                    } else {                        load.fadeOut(200);                    }                    //message//                    if (response.message) {//                        ajaxMessage(response.message, ajaxResponseBaseTime);//                    }                },                error: function () {                    ajaxMessage(ajaxResponseRequestError, 5);                    load.fadeOut();                }            });        });    }    function ModalConfirm() {        var form = null;        $('.form_confirm').submit(function (e) {            e.preventDefault();            form = $(this);            var tool = $(this).data('formopt');            if (tool === 'billstoreceive-download') {                if (converteMoedaFloat($('.vl_titutlo').val()) > converteMoedaFloat($('.vl_titutlopg').val())) {                    var valor = (converteMoedaFloat($('.vl_titutlo').val()) - converteMoedaFloat($('.vl_titutlopg').val()));                    $('.modal-all .header-modal-box h4').text('Confirmação');                    $('.modal-all .row-f label').html('Os valores são diferentes, deseja criar um novo título com a diferença? Assim um novo título será criado com o valor: <b><i>R$ ' + convertToCurrencySem(valor) + '</i></b>');                    Modal(tool);                    return;                }            }            if (tool === 'billstopay-download') {                if (converteMoedaFloat($('.vl_titutlo').val()) > converteMoedaFloat($('.vl_titutlopg').val())) {                    var valor = (converteMoedaFloat($('.vl_titutlo').val()) - converteMoedaFloat($('.vl_titutlopg').val()));                    $('.modal-all .header-modal-box h4').text('Confirmação');                    $('.modal-all .row-f label').html('Os valores são diferentes, deseja criar um novo título com a diferença? Assim um novo título será criado com o valor: <b><i>R$ ' + convertToCurrencySem(valor) + '</i></b>');                    Modal(tool);                    return;                }            }            ToolSubmit(form);            return;        });        $('body').on('click', '.acceptoption', function (e) {            e.preventDefault();            ToolSubmit(form);        });    }    function ToolSubmit(data) {        var form = data;        var load = $(".ajax_load");        form.ajaxSubmit({            url: form.attr("action"),            type: "POST",            dataType: "json",            beforeSend: function () {                load.fadeIn(200).css("display", "flex");            },            uploadProgress: function (event, position, total, completed) {                var loaded = completed;                var load_title = $(".ajax_load_box_title");                load_title.text("Enviando (" + loaded + "%)");                if (completed >= 100) {                    load_title.text("Aguarde, carregando...");                }            },            success: function (response) {                //redirect                if (response.redirect) {                    window.location.href = response.redirect;                } else {                    form.find("input[type='file']").val(null);                    load.fadeOut(200);                }                //reload                if (response.reload) {                    window.location.reload();                } else {                    load.fadeOut(200);                }                if (response.erro === true) {                    trigger(response.notify);                    closeModal();                    load.fadeOut(200);                } else {                    trigger(response.notify);                    closeModal();                    load.fadeOut(200);                }                //message//                if (response.message) {//                    ajaxMessage(response.message, ajaxResponseBaseTime);//                }                if (response.reset === true) {                    form.trigger("reset");                }                //image by fsphp mce upload                if (response.mce_image) {                    $('.mce_upload').fadeOut(200);                    tinyMCE.activeEditor.insertContent(response.mce_image);                }                if (response.href.length) {                    window.setTimeout(function () {                        window.location.href = response.href;                    }, 4000);                }                //search realtime                if (response.searchbol) {                    var centerHtml = "";                    $.each(response.search, function (i, data) {                        centerHtml += data;                    });                    $(response.searchclass + " .tbody_select").html(centerHtml);                }                if (response.addproduct) {                    add_product(response.cod, response.chave, response.nome, response.preco, response.quant, response.local, response.comi);                }                if (response.updateproduct) {                    update_product(response.cod, response.chave, response.nome, response.preco, response.quant, response.local, response.comi, response.vlat);                }            },            complete: function () {                if (form.data("reset") === true) {                    form.trigger("reset");                }            },            error: function () {                ajaxMessage(ajaxResponseRequestError, 5);                load.fadeOut();            }        });    }    function Modal(act = null) {        if (act === null) {            $('#button_option').addClass('acceptbutton');            $('#button_option').addClass('btn-danger');            $('#button_option').removeClass('acceptoption');        } else {            $('#button_option').addClass('acceptoption');            $('#button_option').removeClass('acceptbutton');            $('#button_option').removeClass('btn-danger');            $('#button_option').val(act);        }        var modal = $('.modal-function');        modal.show().css('display', 'flex').animate({'opacity': '1'}, 100, function () {            $('.modal-box').animate({'margin-top': '100px', 'opacity': '1'}, 100);        });        $('.modal-function').click(function (e) {            var close = e.target.closest('.modal-box');            if (!close) {                $('.modal-box').animate({                    'margin-top': '-100px',                    'opacity': '0',                    'display': 'none'                }, 0, function () {                    modal.animate({'opacity': '0'}, 0, function () {                        modal.hide();                    });                });            }        });        $('.close').click(function () {            $('.modal-box').animate({'margin-top': '-100px', 'opacity': '0', 'display': 'none'}, 0, function () {                modal.animate({'opacity': '0'}, 0, function () {                    modal.hide();                });            });        });        $('.cancelbutton').click(function () {            $('.modal-box').animate({'margin-top': '-100px', 'opacity': '0', 'display': 'none'}, 0, function () {                modal.animate({'opacity': '0'}, 0, function () {                    modal.hide();                });            });        });    }    function closeModal() {        $('.modal-box').animate({'margin-top': '-100px', 'opacity': '0', 'display': 'none'}, 0, function () {            $('.modal-function').animate({'opacity': '0'}, 0, function () {                $('.modal-function').hide();            });        });    }    function trigger(data) {        if (data[0]) {            $.each(data, function (key, value) {                triggerNotify(data[key]);            });        } else {            triggerNotify(data);        }    }    function triggerNotify(data) {        var triggerContent = "<div class='trigger_notify trigger_notify_" + data.color + "' style='left: 100%; opacity: 0;'>";        triggerContent += "<span class='" + data.icon + "'></span> " + data.title + "";        triggerContent += "<span class='trigger_notify_timer'></span>";        triggerContent += "</div>";        if (!$('.trigger_notify_box').length) {            $('body').prepend("<div class='trigger_notify_box'></div>");        }        $('.trigger_notify_box').prepend(triggerContent);        $('.trigger_notify').stop().animate({'left': '0', 'opacity': '1'}, 200, function () {            $(this).find('.trigger_notify_timer').animate({'width': '100%'}, data.timer, 'linear', function () {                $(this).parent('.trigger_notify').animate({'left': '100%', 'opacity': '0'}, function () {                    $(this).remove();                });            });        });        $('body').on('click', '.trigger_notify', function () {            $(this).animate({'left': '100%', 'opacity': '0'}, function () {                $(this).remove();            });        });    }});